language: go
go:
  - 1.10.x
addons:
  apt:
    packages:
      - python3
script:
  - "python3 ./build.py -ib"
  - "go test -v ./..."
before_deploy:
  - "go version"
  - "ls -al"
  - "python3 ./build.py -id"
deploy:
  provider: releases
  api_key:
    secure: "flElEIqiLOBBUBCTS5Fmy5FvIYWTyd7uSmqUhKXR8uBmLmWbnSMVnj/5szu03HyvbH/TLKwQhRzYtTWHADm6D0MqcpnY8/cKqIa3Hx0VQQXLyMtgYN3TUSI9cT15WE/ETjcPToC2K7/B71V7OIb6rOSOaFv7iuYy/2j8qa5TOX22D9q0t6XpRNsC2zY5fnkhSCiOnjQuEDqxspwCdID+XHbrvnt+jBA5zcXma9TKEURweGUREOrWJwbeFEn1y61DOGRbSys07J/KE2wf42NozIU7BDgj7uOOBbPaCezxTPtCsaB+DtWRO2ZVVukPAUeQPDiDTMz35XotC/Nuj8ax6ILTnYxQPdKvwkTTeVoHKj7t+tm4meAq+pVnbpI5z3sDe+naiXYGfaDyajkNv3ig1gh9sLgtxcb5cF6cEcyHYcvKhM9NC6uAhEBmuuDSxHVz9il663yr7A6QpSyEOxW3gWuo7nktzInHe6bjdGlV5OR+3e1E4Za2cPLJbb40AlU4vvyw0c2vppC3d+WDhrDqMiYs0Pf7FRrMVxVtN4SF0/F82+0HVuXQaZvSPDhwEidzVirAiKQkec0wZKgDR7/IqZQkM4j6QVA5VJPvN0NvQZ1SFmKBmaB/egmTBC1Kz03D28OWs2/YQk84toNOqJaJjE8MWPcY0ceIhGG89nUN7qM="
  file:
    - overture-darwin-amd64.zip
    - overture-linux-386.zip
    - overture-linux-amd64.zip
    - overture-linux-arm.zip
    - overture-linux-arm64.zip
    - overture-linux-mips-softfloat.zip
    - overture-linux-mips-hardfloat.zip
    - overture-linux-mipsle.zip
    - overture-linux-mips64.zip
    - overture-linux-mips64le.zip
    - overture-windows-386.zip
    - overture-windows-amd64.zip
  skip_cleanup: true
  on:
    tags: true
