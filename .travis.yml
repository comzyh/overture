language: go
go:
  - 1.10.x
addons:
  apt:
    packages:
      - python3
script:
  - "python3 ./build.py -ib"
  - "go test -v ./..."
before_deploy:
  - "go version"
  - "ls -al"
  - "python3 ./build.py -id"
deploy:
  provider: releases
  api_key:
    secure: "IdwIFlQFT2h/BwtRJrTesgGHc0XHpLAn886JESDd8anLzMZG9uzpu/7O6KVl0/Lt+cADNpIRwH8f7sgHABjg8mXZud2+q5wapmg+6EdVuOf4sQ5HJcTS4OS1FClE1P6Sk+PS9GpY8OOS/YfXeyTD+7SI/r/jYcmD8DoU9ybLiWQWPZCCiCw8ep71YABH7v0zOQ6uW9f8GKDIkHRWQu/xOlCRMeb4IE6j3Q2s/Z5MZqWnYtFRoVFDENkXxgrLok1l/TBniQcC3hBSUd7z2BTqZCpWGAmGRq2s48wIDrlRcoLqXtMzobgMB1+ZE9Ky0IWUZnZ81K1A+9gfB3uTdp0oMQXuiSsvDdOMp1us3GuipTZBtUWSKPr1IxkKqF4cnVI1Q/XN05d1h56ewZtLEHugWXwjGFPqsd0Ys5x/L6xFVi9tZemZB050pIcAfQ1EX2blakgN4rs813548sgBSUvNDN9fno8gMxLJltKQS780wW2TS4z61M5kixZ3roTlW0aMmM+msctz+Hm4bJK3p0eDkLE/WTE9Zk5EHsKpjf9ADFXpkgTc4RWKrmEVtTZ7RHyQuf/K7ZN1muHQW1LiqjpHdZnaA80YjRnwhd/wyi8bMEa+Qr2EugUKFxSYVvpLndg7eXKojyvRR3QaDim39bZh3P0zylQTOwLxE3UHAMjItn0="
  file:
    - overture-darwin-amd64.zip
    - overture-linux-386.zip
    - overture-linux-amd64.zip
    - overture-linux-arm.zip
    - overture-linux-arm64.zip
    - overture-linux-mips-softfloat.zip
    - overture-linux-mips-hardfloat.zip
    - overture-linux-mipsle.zip
    - overture-linux-mips64.zip
    - overture-linux-mips64le.zip
    - overture-windows-386.zip
    - overture-windows-amd64.zip
  skip_cleanup: true
  on:
    tags: true
